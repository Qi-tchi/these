We generalize the concept of the ruler-graph presented in Chapter~\ref{chap:subgraph_counting}.

\begin{definition}
    \label{antipattern:def:ruler_graph}
    A \textbf{ruler-graph}\index{Ruler-graph!morphism counting with antipatterns} is an order pair \( (X, \mathcal{C}) \) where $X$ is the \textbf{underlying graph} and $\mathcal{C}$ is a set of monomorphisms from $X$ with $\card{\mathcal{C}}\mathop{\leq} 1$. Each $f \in \mathcal{C}$ is called a \textbf{forbidden context}\index{Forbidden context}.
\end{definition}
In this chapter we restrict attention to the case $\card{\mathcal{C}}\mathop{\leq} 1$, and defer an analysis for general finite $\mathcal{C}$ to future work.

For $f:X \rightarrowtail F \in \mathcal{C}$, we also call $F$ a forbidden context for simplicity.
The definition of measurement needs some modifications to take the forbidden context into account. When $\mathcal{C} \mathop{=} \emptyset$, the definition of measurement is the same as that in Definition~\ref{subgraph_counting:def:measurement} in Chapter~\ref{chap:subgraph_counting}. When $\mathcal{C} = \set{f}$ with $f:X \rightarrowtail F$, we exclude those monomorphisms whose images overlap with the forbidden context. These excluded monomorphisms are those that can be extended to a morphism $g: F \rightarrowtail G$. This leads us to the following definition.
\begin{definition} 
    \label{antipattern:def:measurement}
    \index{Measurement of object!morphism counting with antipatterns}
    Let \( \mathcal{X} = (X,\mathcal{C}) \) be a ruler-graph and \( G \) a graph. The \textbf{measurement} of \( G \) with respect to \( \mathcal{X}\), denoted \( m_\mathcal{X}(G) \), is defined as 
    \[
        m_\mathcal{X}(G) \isdef 
        \card{\{h \mathop{\in} \operatorname{Mono}(X,G) \mathop{\mid} \forall f \in \mathcal{C}. \nexists g\in \operatorname{Mono}(F,G).\,f \mathop{\star} g \mathop{=} h \}}
        % \begin{cases}
        %     \card{\{h \mathop{\in} \operatorname{Mono}(X,G) \mathop{\mid} \nexists g.\,f \mathop{\star} g \mathop{=} h \}}, & \text{if } \mathcal{C} \mathop{=}  \set{f}, \\
        %     \card{\operatorname{Mono}(X,G)}, & \text{if } \mathcal{C} \mathop{=} \emptyset.
        % \end{cases}
    \]
\end{definition}
The definitions of weight function and graph weights are identical to those in Definition~\ref{subgraph_counting:def:weight_function} and Definition~\ref{subgraph_counting:def:graph_weight} in Chapter~\ref{chap:subgraph_counting}, respectively, except that we use the new definition of measurement.