\begin*{\textbf{ Lemma~\ref{subgraph_counting:lem:decomp_w_u}}}
    Let $X$ be a ruler-graph. For a pushout square as shown below:
        \begin{center}
        % \resizebox{0.2\textwidth}{!}{
            \begin{tikzpicture}
            \node (A) at (0,0) {$A$};
            \node (B) at (0,-2) {$B$}; 
            \node (C) at (-2,0) {$C$}; 
            \node (D) at (-2,-2) {$D$}; 
            \draw [>->] (A) to node [right,label,pos=0.5] {$\alpha$} (B);
            \draw [>->] (A) to node [above,label,pos=0.5] {$\beta$} (C);
            \draw [>->] (B) to node [below,label,pos=0.45] {$\beta'$} (D); 
            \draw [>->] (C) to node [left,label,pos=0.45] {$\alpha'$} (D);
        \end{tikzpicture}
        % }
        \end{center}
         the following equalities hold:
        % $\card{\operatorname{Mono}(X, B)} \mathop{=} \card{\operatorname{Mono}(X, D, \beta')}$ and $\card{\operatorname{Mono}(X, C, \lnot \beta)} \mathop{=} \card{\operatorname{Mono}(X, D, \lnot \beta', \alpha')}$.
        \begin{flalign*}
            \card{\operatorname{Mono}(X, B)} &= \card{\operatorname{Mono}(X, D, \beta')},
            \\
            \card{\operatorname{Mono}(X, C, \lnot \beta)} &= \card{\operatorname{Mono}(X, D, \lnot \beta', \alpha')}.
        \end{flalign*}
\end*{}
\begin{proof}
    \label{subgraph_counting:proof:dcomp_w_u}
%    Since $\operatorname{Mono}(X, B) \mathop{=} \operatorname{Mono}(X, D, \beta')$ by definition of $\operatorname{Mono}(X, B)$ and $\operatorname{Mono}(X, D, \beta')$, the equality $\card{\operatorname{Mono}(X, B)} \mathop{=} \card{\operatorname{Mono}(X, D, \beta')}$ holds.
\begin{claim}
    $\card{\operatorname{Mono}(X, B)} \mathop{=} \card{\operatorname{Mono}(X, D, \beta')}$ holds.
\end{claim}
\begin{itemize} 
    \item The inclusion \(\operatorname{Mono}(X, B) \mathop{\star} \beta' \mathop{\subseteq} \operatorname{Mono}(X, D, \beta')\) holds by the definitions of $\operatorname{Mono}(X, B)$ and $\operatorname{Mono}(X, D, \beta')$. 
    In fact, if \(\iota  \mathop{\in} \operatorname{Mono}(X, B) \mathop{\star} \beta' \), then there is a monomorphism \(\zeta : X \rightarrowtail B\) satisfying \(\iota \mathop{=} \zeta \mathop{\star} \beta'\). Since $\zeta \mathop{\star} \beta'$ is also a monomorphism\todo{monicity of $\beta'$}, \(\iota\) is also an element of \(\operatorname{Mono}(X, D, \beta')\).
    \item Inclusion \(\operatorname{Mono}(X, B) \mathop{\star} \beta' \supseteq \operatorname{Mono}(X, D, \beta')\) holds by the definition of $\operatorname{Mono}(X, B)$ and $\operatorname{Mono}(X, D, \beta')$.
    Suppose \(\iota \mathop{\in} \operatorname{Mono}(X, D, \beta')\). There is a monomorphism \(\zeta : X \rightarrowtail B\) satisfying \(\iota \mathop{=} \zeta \mathop{\star} \beta'\). This shows that \(\iota \) is an element of \(\operatorname{Mono}(X, B) \mathop{\star} \beta'\).
    \item Hence, we have \(\operatorname{Mono}(X, B) \mathop{\star} \beta' \mathop{=} \operatorname{Mono}(X, D, \beta')\).
    \item $\card{\operatorname{Mono}(X, B)} \leq \card{\operatorname{Mono}(X, D, \beta')}$ follows by the injectivity of $\beta'$\todo{monicity of $\beta'$}.
\end{itemize}
\begin{claim}
     $\card{\operatorname{Mono}(X, C, \lnot \beta)} \mathop{=} \card{\operatorname{Mono}(X, D, \lnot \beta', \alpha')}$ holds.
   \end{claim}
    \begin{itemize}
        % \item The inclusion \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'  \mathop{\subseteq} \operatorname{Mono}(X, D, \lnot \beta', \alpha')\) can be justified as follows. Suppose that \(\iota : X \mathop{\to} D\) is an element of \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'\). According to the definition of \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'\), there is \(\eta : X \mathop{\to} C\) in \(\operatorname{Mono}(X, C, \lnot \beta)\) such that \(\iota \mathop{=} \eta \mathop{\star} \alpha'\). We need to show that no \(\zeta : X \mathop{\to} B\) exists such that \(\iota \mathop{=} \zeta \mathop{\star} \beta'\). Assuming the contrary, that such a \(\zeta\) exists. Under this assumption, the following commutative diagram holds:
        \item The inclusion \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'  \mathop{\subseteq} \operatorname{Mono}(X, D, \lnot \beta', \alpha')\) can be justified as follows: Suppose \(
            \eta \mathop{\star} \alpha' \mathop{\in} \operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'\).
        %  By the definition of \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'\), there is a morphism \(\eta : X \mathop{\to} C\) in \(\operatorname{Mono}(X, C, \lnot \beta)\) such that \(\iota \mathop{=} \). 
         Since $\eta \mathop{\star} \alpha'$ is a monomorphism\todo{monicity of $\alpha'$}, it suffices to show that there is no \(\zeta : X \rightarrowtail B\) such that \(\eta \mathop{\star} \alpha' \mathop{=} \zeta \mathop{\star} \beta'\). Suppose, by contradiction, that such a \(\zeta\) exists, then the following commutative diagram holds:
        \begin{center}
            \begin{tikzpicture}
                \node (A) {A}; 
                \node (B) [above right=of A] {B};
                \node (X) [left  = of A] {X};
                \node (D) [below right=of B] {D};
                \node (C) [below right=of A] {C};
                \draw[>->] (A) to node[pos=.7, below] {$\alpha$} (B) ;
                \draw[>->] (C) to  node[pos=0.7, below] {$\alpha'$} (D);
                \draw[>->] (A) -- (C) node[pos=.4, right] {$\beta$};
                \draw[>->] (B) -- (D) node[pos=.4, right] {$\beta'$};
                \draw[>->] (X) -- node[above] {$\zeta$} (B);
                \draw[>->] (X) -- node[below] {$\eta$} (C);
            \end{tikzpicture}
        \end{center} 
        The pushout square \(\square ABDC\) is also a pullback square, by Proposition~\ref{prop:pb_eq_po}. The universal property of the pullback provides a morphism \(\gamma : X \mathop{\rightarrow} A\) such that \(\eta \mathop{=} \gamma \mathop{\star} \beta\). \(\gamma\) is a monomorphism, because \(\eta \mathop{=} \gamma \mathop{\star} \beta\) and $\eta$ is a monomorphism. Therefore, the existence of $\gamma$ contradicts the assumption that \(\eta \mathop{\in} \operatorname{Mono}(X, C, \lnot \beta)\). Thus, \(\iota\) is also an element of \(\operatorname{Mono}(X, D, \lnot \beta', \alpha')\). 
        \item The inclusion \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'  \supseteq \operatorname{Mono}(X, D, \lnot \beta', \alpha')\) can be justified as follows. Suppose that \(\iota : X \rightarrowtail D\) is an element of \(\operatorname{Mono}(X, D, \lnot \beta', \alpha')\). According to the definition of \(\operatorname{Mono}(X, D, \lnot \beta', \alpha')\), there is \(\eta : X \rightarrowtail C\) making 
            \begin{flalign}
                \iota \mathop{=} \eta \mathop{\star} \alpha'. \label{eq:etastaralphap}
            \end{flalign}
        We show that \(\eta\) is an element of 
        \(\operatorname{Mono}(X, C, \lnot \beta)\) by contradiction.
        
        Suppose that there is a monomorphism \(\zeta : X \rightarrowtail A\) such that 
        \begin{flalign}
            \eta \mathop{=} \zeta \mathop{\star} \beta. \label{eq:zetastarbeta}
        \end{flalign}
        We have:
        \begin{flalign*}
           \hspace{2cm} \iota &\overset{\operatorname{def}}{=} \eta \mathop{\star} \alpha' &\text{by \eqref{eq:etastaralphap}} 
           \\
                  &\overset{\operatorname{def}}{=} (\zeta \mathop{\star} \beta) \mathop{\star} \alpha' & \text{by \eqref{eq:zetastarbeta}}
                  \\
                  &= \zeta \mathop{\star} (\beta \mathop{\star} \alpha') & \text{by associativity} 
                  \\
                  &= \zeta \mathop{\star} (\alpha \mathop{\star} \beta') &\text{by commutativity of $ABDC$}\\
                  &= (\zeta \mathop{\star} \alpha) \mathop{\star} \beta'.
        \end{flalign*}
          There is a contradiction because no such factorization of \(\iota\) should exist as \(\iota \mathop{\in} \operatorname{Mono}(X, D, \lnot \beta', \alpha')\).
        %    Therefore, there is no \(\zeta : X \mathop{\rightarrow} A\) such that \(\eta \mathop{=} \zeta \mathop{\star} \beta\), confirming \(\eta\) as an element of \(\operatorname{Mono}(X, C, \lnot \beta)\). Consequently, \(\iota \mathop{=} \eta \mathop{\star} \alpha'\) is an element of \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'\).
        \item We conclude by the monicity of \(\alpha'\). \todo{monicity of $\alpha'$}
        % From \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'  \mathop{\subseteq} \operatorname{Mono}(X, D, \lnot \beta', \alpha')\) and \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'  \supseteq \operatorname{Mono}(X, D, \lnot \beta', \alpha')\), we conclude \(\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha' \mathop{=} \operatorname{Mono}(X, D, \lnot \beta', \alpha')\) and \(\card{\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'} \mathop{=} \card{\operatorname{Mono}(X, D, \lnot \beta', \alpha')}\).
        % Since \(\alpha'\) is monic, \(\card{\operatorname{Mono}(X, C, \lnot \beta)} \mathop{=} \card{\operatorname{Mono}(X, C, \lnot \beta) \mathop{\star} \alpha'}\). Therefore, \(\card{\operatorname{Mono}(X, C, \lnot \beta)} \mathop{=} \card{\operatorname{Mono}(X, D, \lnot \beta', \alpha')}\).
    \end{itemize}
\end{proof} 

\noindent
\begin*{\textbf{ Lemma~\ref{subgraph_counting:lem:xlnlmxrnr}}}
Let $X$ be a graph. Let $L \overset{l}{\leftarrow} K \overset{r}{\rightarrow} R$ be an injective DPO graph rewriting rule. We have 
\[
   \card{\operatorname{Mono}(X, L, \lnot l)}  - \card{\operatorname{Mono}(X, R, \lnot r)} 
   \mathop{=} 
   \card{\operatorname{Mono}(X, L)}  - \card{\operatorname{Mono}(X, R)}.
    \]
\end*{}
\begin{proof}
    \label{subgraph_counting:proof:lem:xlnlmxrnr}
    \begin{claim}
       $\card{\operatorname{Mono}(X, L, l)} \mathop{=} \card{\operatorname{Mono}(X, R, r)}$ holds.
    \end{claim}
    \begin{itemize}
        \item We prove $\card{\operatorname{Mono}(X, L, l)} \leq \card{\operatorname{Mono}(X, R, r)}$ by constructing an injection from $\operatorname{Mono}(X, L, l)$ to $\operatorname{Mono}(X, R, r)$. Let $h \mathop{\in} \operatorname{Mono}(X, L, l)$. By definition, we have $h \mathop{=} g \mathop{\star} l$ for some $g: X \rightarrowtail K$. Thus, $g \mathop{\star} r \mathop{\in} \operatorname{Mono}(X, L, r)$. Let $h' \mathop{\in} \operatorname{Mono}(X, L, l)$ such that $h \mathop{\neq} h'$. We have $h' \mathop{=} g' \mathop{\star} l$ for some $g':X \rightarrowtail K$. We have $g \mathop{\neq} g'$ because otherwise we would have $h \mathop{=} g \mathop{\star} l \mathop{=} g' \mathop{\star} l \mathop{=} h'$. From the monicity of $r$, we conclude $g \mathop{\star} r \mathop{\neq} g' \mathop{\star} r$.
        \item Analoguously, we can prove $\card{\operatorname{Mono}(X, L, l)} \mathop{\geq} \card{\operatorname{Mono}(X, R, r)}$ by constructing an injection from $\operatorname{Mono}(X, R, r)$ to $\operatorname{Mono}(X, L, l)$.
        %  Let $h \mathop{\in} \operatorname{Mono}(X, R, r)$. By definition, we have $h \mathop{=} g \mathop{\star} r$ for some $g: X \rightarrowtail K$. Thus, $g \mathop{\star} l \mathop{\in} \operatorname{Mono}(X, L, l)$.
        % Let $h' \mathop{\in} \operatorname{Mono}(X, R, r)$ such that $h \mathop{\neq} h'$. We have $h' \mathop{=} g' \mathop{\star} l$ for some $g':X \rightarrowtail K$. Since $r$ is monic, we deduce $g \mathop{\neq} g'$. From the monicity of $l$, we conclude $g \mathop{\star} r \mathop{\neq} g' \mathop{\star} r$.
    \end{itemize}


    % we have \[\card{\operatorname{Mono}(X, L, l)} - \card{\operatorname{Mono}(X, R, r)} \mathop{=} 0 \] becase 
    
    Hence, the following equality holds
    \begin{flalign*}
         &\card{\operatorname{Mono}(X, L, \lnot l)}  - \card{\operatorname{Mono}(X, R, \lnot r)}\\
        =&\card{\operatorname{Mono}(X, L) \mathop{\setminus} \operatorname{Mono}(X, L, l)}  - 
            \card{\operatorname{Mono}(X, R) \mathop{\setminus} \operatorname{Mono}(X, R, r)}\\
        =&(\card{\operatorname{Mono}(X, L)} - \card{\operatorname{Mono}(X, L, l)}) - (\card{\operatorname{Mono}(X, R)} - \card{\operatorname{Mono}(X, R, r)}) \\
        =&(\card{\operatorname{Mono}(X, L)} - \card{\operatorname{Mono}(X, R)})
         - (\card{\operatorname{Mono}(X, L, l)} - \card{\operatorname{Mono}(X, R, r)})\\
        \mathop{=} &\card{\operatorname{Mono}(X, L)} - \card{\operatorname{Mono}(X, R)}.
    \end{flalign*}
\end{proof}

\noindent
\begin*{\textbf{ Lemma~\ref{subgraph_counting:lem:w_u_l_not_geq_r_not}}}
  Let $X$ be a ruler-graph and $\rho \mathop{=} (L \overset{l}{\leftarrowtail} K \overset{r}{\rightarrowtail} R)$ an injective DPO rewriting rule.
        Suppose that $\rho$ is $X$-non-increasing. For every rewriting step induced by the following DPO diagram:
        \begin{center}
        % \resizebox{0.3\textwidth}{!}{ 
                \begin{tikzpicture}
            \node (k) at (0,1) {K};
            \node (l) at (-2,1) {L};
            \node (r) at (2,1) {R};
            \node (c) at (0,-1) {C};
            \node (g) at (-2,-1) {G};
            \node (h) at (2,-1) {H};
            \draw[<-<]  (l) -- (k) node [midway,below] {$l$};
            \draw[>->]  (k) -- (r) node [midway,below] {$r$};
            \draw[>->] (c) -- (g) node [midway, above] {$l'$};
            \draw[>->] (c) -- (h) node [midway,above] {$r'$};
            \draw[>->] (l) -- (g) node[midway, right] {$m$};
            \draw[>->] (r) -- (h) node[midway, left] {$m'$};
            \draw[>->] (k) -- (c) node[midway, left] {};
            \node () [at=($(l)!0.5!(c)$)] {$PO$};
            \node () [at=($(r)!0.5!(c)$)] {$PO$};
        \end{tikzpicture}
        % }
        \end{center}
       The following inequality holds:
        \[
            |\operatorname{Mono}(X, G, \lnot m, \lnot l')| \mathop{\geq} |\operatorname{Mono}(X, H, \lnot m', \lnot r')|
        \]
\end*{}
\begin{proof}
    \label{proof:lem:w_u_l_not_geq_r_not}
    We are going to show that for two arbitrary distinct monomorphisms $h_{XH}', h_{XH}'' \mathop{\in} \operatorname{Mono}(X, H, \lnot m', \lnot r')$, there are two distinct monomorphisms $h_{XG}'$ and $h_{XG}'' \mathop{\in} \operatorname{Mono}(X, G, \lnot m, \lnot l')$.

    Let $h_{XH}'\in \operatorname{Mono}(X, H, \lnot m', \lnot r')$ be a monomorphism. In the category \textbf{Graph}, we can construct the following commutative diagram
    \begin{center}
        % \resizebox{6cm}{!}{
            \begin{tikzpicture}[scale=1.5]
                \node (k) at (0,0) {K};
                \node (r) at (4,0) {R};
                \node (c) at (0,-3) {C};
                \node (h) at (4,-3) {H};
                \draw[<-<]  (r) -- (k) node [midway,above] {};
                \draw[>->] (c) -- (h) node [midway, below] {};
                \draw[>->] (r) -- (h) node[midway, left] {};
                \draw[>->] (k) -- (c) node[midway, left] {};
                \node (k') at (1,-1) {K'};
                \node (r') at (2,-1) {R'};
                \node (c') at (1,-2) {C'};
                \node () at (1.5,-1.5) {$PB$};
                \node () at (3,-1.5) {$PB$};
                \node () at (1.5,-2.5) {$PB$};
                \node (x) at (2,-2) {X};
                \draw [>->] (c') -- (x);
                \draw [>->] (r') -- (x);
                \draw [>->] (k') -- (r');
                \draw [>->] (k') -- (c');
                \draw [>->] (c') -- (c);
                \draw[>->] (r') -- (r);
                \draw[>->] (x) -- (h) node[midway,right] {$h$};
            \end{tikzpicture}
        % }
        \end{center} 
    
    $KCHR$ is also pullback, by Proposition~\ref{prop:pb_eq_po}, because it is pushout. 
    Therefore, since $KCHR$ is also pullback and \(
        h_{K'C'} \mathop{\star} h_{C'C} \mathop{\star} h_{CH} =h_{K'R'} \mathop{\star} h_{R'R} \mathop{\star} h_{R'R}
    \) holds, there is $h_{K'K}:K' \rightarrowtail K$ such that the following equalities hold:
    \begin{flalign}
        h_{K'C'} \mathop{\star} h_{C'C} &= h_{K'K} \mathop{\star} h_{KC}, \label{kpcpcpckpkkc}
        \\
        h_{K'R'} \mathop{\star} h_{R'R} &= h_{K'K} \mathop{\star} h_{KR}. \label{kprprprkpk}
    \end{flalign} 
    
    The square $K'KCC'$ and $K'R'RK$ are pullbacks, by Lemma~\ref{kpcpck_pullback}. Hence, the following commutative diagram holds
    \begin{center}
        % \resizebox{6cm}{!}{
            \begin{tikzpicture}[scale=1.5]
                \node (k) at (0,0) {K};
                \node (r) at (4,0) {R};
                \node (c) at (0,-3) {C};
                \node (h) at (4,-3) {H};
                \draw[<-<]  (r) -- (k) node [midway,above] {};
                \draw[>->] (c) -- (h) node [midway, below] {};
                \draw[>->] (r) -- (h) node[midway, left] {};
                \draw[>->] (k) -- (c) node[midway, left] {};
                \node (k') at (1,-1) {K'};
                \node (r') at (2,-1) {R'};
                \node (c') at (1,-2) {C'};
                \node () at (1.5,-1.5) {$PB$};
                \node () at (3,-1.5) {$PB$};
                \node () at (1.5,-2.5) {$PB$};
                \node () at (1.5,-0.5) {$PB$};
                \node () at (0.5,-1.5) {$PB$};
                \node (x) at (2,-2) {X};
                \draw [>->] (c') -- (x);
                \draw [>->] (r') -- (x);
                \draw [>->] (k') -- (r');
                \draw [>->] (k') -- (c');
                \draw [>->] (c') -- (c);
                \draw[>->] (r') -- (r);
                \draw[>->] (x) -- (h) node[midway,right] {$h$};
                \draw[>->] (k') -- (k) ;
            \end{tikzpicture}
        % }
        \end{center} 

    \todo{use: assumption: non increasing}
    Since the rule is by assumption $X$-non-increasing, there is a morphism $h_{R'L}$ such that $K'KLR'$ is commutative.
    
    $K'C'XR'$ is a pushout by Lemma~\ref{kpcpxrp_po}. 
    
    Thus, the following commutative diagram holds
    \begin{center}
            \begin{tikzpicture}[scale=1.5]
                \node (k) at (0,0) {K};
                \node (r) at (4,0) {L};
                \node (c) at (0,-3) {C};
                \node (h) at (4,-3) {G};
                \draw[<-<]  (r) -- (k) node [midway,above] {};
                \draw[>->] (c) -- (h) node [midway, below] {};
                \draw[>->] (r) -- (h) node[midway, left] {};
                \draw[>->] (k) -- (c) node[midway, left] {};
                \node (k') at (1,-1) {K'};
                \node (r') at (2,-1) {R'};
                \node (c') at (1,-2) {C'};
                \node () at (1.5,-1.5) {$PO$};
                \node () at (0.5,-1.5) {$PB$};
                \node (x) at (2,-2) {X};
                \draw [>->] (c') -- (x);
                \draw [>->] (r') -- (x);
                \draw [>->] (k') -- (r');
                \draw [>->] (k') -- (c');
                \draw [>->] (c') -- (c);
                \draw [->] (k') -- (k);
                \draw[>->] (r') -- (r);
            \end{tikzpicture}
        \end{center} 

    By Lemma~\ref{lem:g_monic}, there is a unique monomorphism $h_{XG}':X \rightarrowtail G$ such that $h_{C'X} \mathop{\star} h_{XG}' \mathop{=} h_{C'C} \mathop{\star} h_{CG}$ and $h_{R'X} \mathop{\star} h_{XG}' \mathop{=} h_{R'L} \mathop{\star} h_{LG}$.

    By $h_{XH}'\in \operatorname{Mono}(X, H, \lnot m', \lnot r')$ and Definition~\ref{subgraph_counting:def:creates_more_x_on_the_left}, the monomorphism $h_{XG}'$ is in the set $\operatorname{Mono}(X, G, \lnot m, \lnot l')$. 
    Intuitively, some elements in $X$ are mapped onto $h_{RH}(R) \mathop{\setminus} (r \mathop{\star} h_{RH})(K)$ if $h_{XH}'$ is an element of $\operatorname{Mono}(X, H, \lnot m', \lnot r')$. By the first assumption of Definition~\ref{subgraph_counting:def:creates_more_x_on_the_left}, these elements are mapped onto $h_{LG}(L) \mathop{\setminus} (l \mathop{\star} h_{LG})(K)$.

    
    The monomorphism \( h_{XG}' \) belongs to the set \( \operatorname{Mono}(X, G, \lnot m, \lnot l') \), due to \( h_{XH}' \mathop{\in} \operatorname{Mono}(X, H, \lnot m', \lnot r') \) and Definition~\ref{subgraph_counting:def:creates_more_x_on_the_left}. Intuitively, \( h_{XH}'$ is an element of $\operatorname{Mono}(X, H, \lnot m', \lnot r') \) implies that certain elements of \( X \) are mapped into \( h_{RH}(R) \mathop{\setminus} (r \mathop{\star} h_{RH})(K) \). By the second assumption of Definition~\ref{subgraph_counting:def:creates_more_x_on_the_left}, these elements are also mapped into \( h_{LG}(L) \mathop{\setminus} (l \mathop{\star} h_{LG})(K) \).

     \todo{use; def non-increase; condition 1}

    Let $h_{XH}'':X \rightarrowtail H$ be a monomorphism such that 
    \begin{flalign}
        h_{XH}' \mathop{\neq} h_{XH}''. \label{hpneqh}
    \end{flalign}
    
    In the category \textbf{Graph}, we can construct the following commutative diagram:
    \begin{center}
            \begin{tikzpicture}[scale=1.5]
                \node (k) at (0,0) {K};
                \node (r) at (4,0) {L};
                \node (c) at (0,-3) {C};
                \node (h) at (4,-3) {G};
                \draw[<-<]  (r) -- (k) node [midway,above] {};
                \draw[>->] (c) -- (h) node [midway, below] {};
                \draw[>->] (r) -- (h) node[midway, left] {};
                \draw[>->] (k) -- (c) node[midway, left] {};
                \node (k') at (1,-1) {K'};
                \node (r') at (2,-1) {R'};
                \node (c') at (1,-2) {C'};
                \node () at (1.5,-1.5) {$PO$};
                \node () at (0.5,-1.5) {$PB$};
                \node (x) at (2,-2) {X};
                \draw [>->] (c') -- (x);
                \draw [>->] (r') -- (x);
                \draw [>->] (k') -- (r');
                \draw [>->] (k') -- (c');
                \draw [>->] (c') -- (c);
                \draw [->] (k') -- (k);
                \draw[>->] (r') -- (r);
            \end{tikzpicture}
        \end{center} 

    Analoguously, there is a unique monomorphism $h_{XG}'':X \rightarrowtail G$ such that $h_{C''X} \mathop{\star} h_{XG} ''= h_{C''C} \mathop{\star} h_{CG}$ and $h_{R''X} \mathop{\star} h_{XG}'' \mathop{=} h_{R''L} \mathop{\star} h_{LG}$.
    
    By \eqref{hpneqh} and Lemma~\ref{lem:h_hp_diff_g_gp_diff}, we have $h_{XG} \mathop{\neq} h_{XG}'$.
\end{proof}



\noindent
\begin*{\textbf{ Lemma~\ref{subgraph_counting:lem:w_g_geq_w_h_leq}}}[Decreasing step]
Let $\rho \mathop{=} (L \overset{l}{\leftarrowtail} K \overset{r}{\rightarrowtail} R)$ be an injective DPO rewriting rule,
\( \mathbb{X} \) a set of ruler-graphs,
\( s_{\mathbb{X}} \mathop{\colon} \mathbb{X} \mathop{\to} \mathbb{N} \) a weight function,
and \( G \mathop{\Rightarrow}_{\rho,\mathfrak{M}} H \) a rewriting step. 
If $\rho$ is \( X \)-non-increasing for every ruler-graph \( X \mathop{\in} \mathbb{X} \), then:\[
    w_{s_\mathbb{X}}(G) - w_{s_\mathbb{X}}(H) 
    \mathop{\geq} 
    w_{s_\mathbb{X}}(L) - w_{s_\mathbb{X}}(R).
\]
\end*{}
\begin{proof}
    \label{subgraph_counting:proof:lem:w_g_geq_w_h_leq}
    Let the following diagram be the witness diagram of the rewriting step
    \begin{center}
        \begin{tikzpicture}
            \node (k) at (0,1) {K};
            \node (l) at (-2,1) {L};
            \node (r) at (2,1) {R};
            \node (c) at (0,-1) {C};
            \node (g) at (-2,-1) {G};
            \node (h) at (2,-1) {H};
            \draw[<-<]  (l) -- (k) node [midway,below] {$l$};
            \draw[>->]  (k) -- (r) node [midway,below] {$r$};
            \draw[>->] (c) -- (g) node [midway, above] {$l'$};
            \draw[>->] (c) -- (h) node [midway,above] {$r'$};
            \draw[>->] (l) -- (g) node[midway, right] {$m$};
            \draw[>->] (r) -- (h) node[midway, left] {$m'$};
            \draw[>->] (k) -- (c) node[midway, left] {};
            \node () [at=($(l)!0.5!(c)$)] {$PO$};
            \node () [at=($(r)!0.5!(c)$)] {$PO$};
        \end{tikzpicture}
    \end{center}
    Let $X \mathop{\in} \mathbb{X}$.
    We have 
    \begin{flalign*}
        & \card{\operatorname{Mono}(X,G)}
            % \overset{\operatorname{def}}{=} 
            % w_{T_\Sigma}(t_G) 
        \\
        % =& \Psi_{G}\\
        =& 
        \card{\operatorname{Mono}(X,G,l')
        \uplus
         \operatorname{Mono}(X,G,\lnot l',m)
        \uplus
         \operatorname{Mono}(X,G,\lnot l',\lnot m)}\\
        =& 
        \card{\operatorname{Mono}(X,G,l')}
        +
         \card{\operatorname{Mono}(X,G,\lnot l',m)}
        +
        \card{\operatorname{Mono}(X,G,\lnot l',\lnot m)}
        \\
    =& \card{\operatorname{Mono}(X,C)}
            +
            \card{\operatorname{Mono}(X, L, \lnot l)} 
            +
            \card{\operatorname{Mono}(X, G,\lnot l', \lnot m)} 
        &  \text{by Lemma~\ref{subgraph_counting:lem:decomp_w_u}}
    \end{flalign*}
    and
    \begin{flalign*}
        % ligne 1
        &\card{\operatorname{Mono}(X,H)}
        % \overset{\operatorname{def}}{=}  
        %     w_{T_\Sigma}(t_H )
        \\
        =& 
        \card{\operatorname{Mono}(X,H,r')
        \uplus
            \operatorname{Mono}(X,H,\lnot r',m')
        \uplus
            \operatorname{Mono}(X,H,\lnot r',\lnot m')}
        \\
        =& 
        \card{\operatorname{Mono}(X,H,r')}
        +
         \card{\operatorname{Mono}(X,H,\lnot r',m')}
        +
        \card{\operatorname{Mono}(X,H,\lnot r',\lnot m')}
        \\
        % \mathop{=} & \Psi_{H} \\
        % ligne 2
        \mathop{=} &
            \card{\operatorname{Mono}(X,C)}
            +
            \card{\operatorname{Mono}(X, R, \lnot r)} 
            +
            \card{\operatorname{Mono}(X, H, \lnot r', \lnot m')}.
        % ( 
        %             w_{T_\Sigma} (h_{RH} \mathop{\star} t_H )\mathop{+}w_{T_\Sigma} (h_{CH} \mathop{\star} t_H  -h_{KC}) 
        % )
        %        \mathop{+} w_{T_\Sigma}(t_H  - \{h_{RH},h_{CH} \})  
        &  \text{by Lemma~\ref{subgraph_counting:lem:decomp_w_u}}
    \end{flalign*}
    Therefore, the following inequality holds
     \begin{flalign*}
           &\card{\operatorname{Mono}(X,G)} - \card{\operatorname{Mono}(X,H)} &\\
           =&(\card{\operatorname{Mono}(X, L, \lnot l)} - \card{\operatorname{Mono}(X, R, \lnot r)})\mathop{+}\\
            &(\card{\operatorname{Mono}(X, G, \lnot l', \lnot m)} - \card{\operatorname{Mono}(X, H, \lnot r', \lnot m')}) \\
       \geq& \card{\operatorname{Mono}(X, L, \lnot l)} - \card{\operatorname{Mono}(X, R, \lnot r)} \hspace{3cm} 
       \text{by Lemma~\ref{subgraph_counting:lem:w_u_l_not_geq_r_not}} \\
          =& \card{\operatorname{Mono}(X, L)} - \card{\operatorname{Mono}(X, R)}. \hspace{3cm} 
          \text{by Lemma~\ref{subgraph_counting:lem:xlnlmxrnr}}
     \end{flalign*}
     Thus, the following inequality holds
     \begin{flalign*}
          &w_{s_\mathbb{X}}(G) - w_{s_\mathbb{X}}(H)
          \\
         =&\sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * |\operatorname{Mono}(X,G)| - \sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * |\operatorname{Mono}(X,H)|
         \\
         =&\sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * \left( \card{\operatorname{Mono}(X,G)} -  \card{\operatorname{Mono}(X,H)} \right)
         \\
         \geq&\sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * \left(  \card{\operatorname{Mono}(X,L)}- \card{\operatorname{Mono}(X,R)} \right)
         \\
         \mathop{=} &\sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * \card{\operatorname{Mono}(X,L)} -  \sum_{X \mathop{\in} \mathbb{X}}^{}w(X) * \card{\operatorname{Mono}(X,R)} 
         \\
         \mathop{=} & w_{s_\mathbb{X}}(L) - w_{s_\mathbb{X}}(R).
     \end{flalign*}
\end{proof}

\noindent
\begin*{\textbf{Theorem\ref{subgraph_counting:thm:termination_grs}}(Termination)}
    Let \(\mathcal{A}\) and \(\mathcal{B}\) be sets of injective DPO rewriting rules, $\mathbb{X}$ a set of ruler-graphs and $s_\mathbb{X}$ a weight function. If the following conditions hold:
    \begin{enumerate}
        \item\label{subgraph_counting:thm:termination_grs:assump:1} $\rho$ is $X$-non-increasing for every rule $\rho \mathop{\in} \mathcal{A} \mathop{\cup} \mathcal{B}$ and for every ruler-graph $X \mathop{\in} \mathbb{X}$,
        \item\label{thm:termination_grs:assump:2} \( w_{s_\mathbb{X}}(lhs(\rho)) \mathop{>} w_{s_\mathbb{X}}(rhs(\rho)) \) for every rule \(\rho \mathop{\in} \mathcal{A}\),
        \item\label{thm:termination_grs:assump:3} \( w_{s_\mathbb{X}}(lhs(\rho)) \mathop{\geq} w_{s_\mathbb{X}}(rhs(\rho)) \) for every rule \(\rho \mathop{\in} \mathcal{B}\).
    \end{enumerate}
    Then \(\mathop{\Rightarrow}_{\mathcal{A},\mathcal{M}}\) terminates relative to \(\mathop{\Rightarrow}_{\mathcal{B},\mathcal{M}}\).
\end*{}
\begin{proof}
    \label{subgraph_counting:proof:thm:termination_grs}
    
    By assumption \eqref{subgraph_counting:thm:termination_grs:assump:1} and  Lemma~\ref{subgraph_counting:lem:w_g_geq_w_h_leq}, the following inequality holds for all rules $\rho \mathop{\in} \mathcal{A} \mathop{\cup} \mathcal{B}$ and for all rewriting steps $G \mathop{\Rightarrow}_{\rho, \mathcal{M}} H$:
     \[
        w_{s_\mathbb{X}}(G) - w_{s_\mathbb{X}}(H) 
        \mathop{\geq} 
        w_{s_\mathbb{X}}(\operatorname{lhs}(\rho)) - w_{s_\mathbb{X}}(\operatorname{rhs}(\rho)).
    \]
    
    \noindent From assumptions \eqref{thm:termination_grs:assump:2} and \eqref{thm:termination_grs:assump:3}, we deduce 
    \begin{itemize}
        \item \( w_{s_\mathbb{X}}(G) \mathop{>} w_{s_\mathbb{X}}(H) \) for every rule \(\rho \mathop{\in} \mathcal{A}\);
        \item  \( w_{s_\mathbb{X}}(G) \mathop{\geq} w_{s_\mathbb{X}}(H) \) for every rule \(\rho \mathop{\in} \mathcal{B}\).
    \end{itemize}
    Since $w_{s_\mathbb{X}}(G) \mathop{\in} \mathbb{N}$ for all graph $G$. Every rewriting chain can only have a finite number of rewriting steps using rules in $\mathcal{A}$.
\end{proof} 